---
title: "Migrating from Older Versions"
weight: 30
---

## Migrating from pre-1.0.0 Projects

The SUSHI project structure and configuration changed significantly between pre-1.0.0 versions of SUSHI and versions of SUSHI 1.0.0 or greater. This guide will assume you currently have a project structure similar to the **customized ig** shown in the [project structure documentation](/docs/sushi/project/#ig-projects) for pre-1.0.0 versions of SUSHI. To migrate this project, the following changes are required:


#### 1 - Clean up generated files (retaining control files) 

Remove the following directories:
  * **./output**
  * ./


 - Move and update the content of config.yaml
* Move the **./fsh/config.yaml** file to the top-level folder, and rename the file to **sushi-config.yaml**.
* Remove the `template` property if present. The template should be specified in the **ig.ini** file.
* Remove the `history` property if necessary. The `history` property is used by SUSHI to generate a **package-list.json** file, and its usage is now deprecated. Similar to `template` above, if SUSHI detects usage of the `history` property to generate a **package-list.json** file, it will log an error message containing the contents of the **package-list.json** that would be generated by the `history` property. Copy these contents and place them in a **package-list.json** file located at **./package-list.json**.

#### Move .fsh files
Move all **.fsh** files within the **./fsh** folder to a new folder, **./input/fsh**.

#### 4 - Move ig-data content
Move the contents of the **./fsh/ig-data** folder to their corresponding location within the **.** folder. When moving these files, each file should be placed at a location under **.** that corresponds to the file's previous location under **ig-data**. So for example, if you had an **ig.ini** file at **./fsh/ig-data/ig.ini**, that file should be moved to just **./ig.ini**. If you had a **menu.xml** file at **./fsh/ig-data/includes/menu.xml**, that file should be moved to **./includes/menu.xml**.

#### 5 - Remove fsh/ directory
At this point, all of the contents of the **./fsh** folder should have been moved out of **./fsh**, so that folder can be safely deleted.

#### 6 - Update the ig.ini file

[IG]
ig = fsh-generated/resources/MyImplementationGuideName.json
template = hl7.fhir.template


* As of the SUSHI 1.0 Beta release, the **ig.ini** file MUST use a template based on `fhir.base.template#current`. Specific template versions (i.e., other than `#current`) are expected to work in the future.  For now, any of the following should work:
  * `template = fhir.base.template#current`
  * `template = hl7.base.template#current`
  * `template = hl7.fhir.template#current`
  * `template = hl7.davinci.template#current`
  * `template = hl7.cda.template#current`
* 



#### 7 - Update .gitignore
If you are using Git for version control, update your **.gitignore** file. In the example of **.**, the pre-migration **.gitignore** would have likely contained **ig.ini** and **package-list.json**, since those files were being generated by SUSHI, and the "true" versions were in the SUSHI configuration or **ig-data**. Now the versions that live at **./ig.ini** and **./package-list.json** are the "true" versions, and should therefore be removed from **.gitignore** and checked into version control. The **./input** folder may have also been in the **.gitignore** file, since SUSHI previously generated output into that folder. Now that **.fsh** files are located in **./input/fsh**, this folder must be removed from **.gitignore** and checked into version control.

SUSHI will now output to **./fsh-generated**, so the **fsh-generated** folder should be added to the **.gitignore** file.

**ADD SAMPLE FILE**

#### 7 - Troubleshooting

Some users may experience one of these issues when running the IG Publisher on their migrated project:
* the IG publisher reports `No Source directories to scan found`
* the published IG does not include any of the resources from **fsh-generated**

This usually means that the IG Publisher is not using the correct template.  _First_, check to ensure your your **ig.ini** specifies the `#current` version of one of the supported templates (or a template that extends one of the supported templates).  See step 5 for the list of supported templates.

If you've confirmed you are using a `#current` version of a supported template, then the IG Publisher likely failed to download the updated template in your FHIR cache.  This may be due to corporate firewalls, network issues, or restrictive file permissions in your FHIR cache.  Sometimes, you can resolve this issue by deleting the base template from your FHIR cache:

&nbsp;&nbsp;&nbsp;&nbsp;{{< windows >}} `C:\Users\{user}\.fhir\packages\fhir.base.template#current`

&nbsp;&nbsp;&nbsp;&nbsp;{{< apple >}} `/Users/{user}/.fhir/packages/fhir.base.template#current`

substituting `{user}` with your username on your operating system.

{{% alert title="Note" color="primary" %}}
If there is a general problem with downloading the template (as opposed to overwriting it), deleting the template will not fix it. Instead the problem will just become more obvious. If this is the case, you may need to disconnect from your VPN (if applicable) and try again or contact your network administrator for assistance.

For this reason, you may choose to temporarily _move_ your **fhir.base.template#current** folder rather than _deleting_ it.  This way, if the new template still fails to download, you can move the old template back and continue using it for other IGs (for which the new template may not be necessary).
{{% /alert %}}
