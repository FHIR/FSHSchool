---
title: "Migrating from Older Versions"
weight: 30
---

## Migrating from pre-1.0.0 Projects

The SUSHI project structure and configuration changed significantly between pre-1.0.0 versions of SUSHI and versions of SUSHI 1.0.0 or greater. This guide will assume you currently have a project structure similar to the **customized ig** shown in the [project structure documentation](/docs/sushi/project/#ig-projects) for pre-1.0.0 versions of SUSHI. To migrate this project, the following changes are required:

#### 1 - Move config.yaml
Move the **customized-ig/fsh/config.yaml** file to the top-level of the **customized-ig** folder, and rename the file to **sushi-config.yaml**, so that the file is located at **customized-ig/sushi-config.yaml**.
#### 2 - Move .fsh files
Move all **.fsh** files within the **customized-ig/fsh** folder to a new folder, **customized-ig/input/fsh**.
#### 3 - Move ig-data Content
Move the contents of the **customized-ig/fsh/ig-data** folder to their corresponding location within the **customized-ig** folder. When moving these files, each file should be placed at a location under **customized-ig** that corresponds to the file's previous location under **ig-data**. So for example, if you had an **ig.ini** file at **customized-ig/fsh/ig-data/ig.ini**, that file should be moved to just **customized-ig/ig.ini**. If you had a **menu.xml** file at **customized-ig/fsh/ig-data/includes/menu.xml**, that file should be moved to **customized-ig/includes/menu.xml**.
#### 4 - Remove fsh/ Directory
At this point, all of the contents of the **customized-ig/fsh** folder should have been moved out of **customized-ig/fsh**, so that folder can be safely deleted.
#### 5 - Update Content of sushi-config.yaml
Update **sushi-config.yaml** to remove the `template` property if necessary. The `template` property is used by SUSHI to generate an **ig.ini** file, and its usage is now deprecated. The **ig.ini** file must be managed directly. If SUSHI detects usage of the `template` property to generate an **ig.ini** file, it will log an error message containing the **ig.ini** that would be generated by that `template` property. Copy these contents, and place them in an **ig.ini** file located at **customized-ig/ig.ini**.

{{% alert title="Warning" color="warning" %}}
As of the SUSHI 1.0 Beta release, the **ig.ini** file MUST use a template based on `fhir.base.template#current`. Specific template versions (i.e., other than `#current`) are expected to work in the future.  For now, any of the following should work:
  * `template = fhir.base.template#current`
  * `template = hl7.base.template#current`
  * `template = hl7.fhir.template#current`
  * `template = hl7.davinci.template#current`
  * `template = hl7.cda.template#current`
{{% /alert %}}

Update **sushi-config.yaml** to remove the `history` property if necessary. The `history` property is used by SUSHI to generate a **package-list.json** file, and its usage is now deprecated. Similar to `template` above, if SUSHI detects usage of the `history` property to generate a **package-list.json** file, it will log an error message containing the contents of the **package-list.json** that would be generated by the `history` property. Copy these contents and place them in a **package-list.json** file located at **customized-ig/package-list.json**.

#### 6 - Update Version Control
If you are using Git for version control, update your **.gitignore** file. In the example of **customized-ig**, the pre-migration **.gitignore** would have likely contained **ig.ini** and **package-list.json**, since those files were being generated by SUSHI, and the "true" versions were in the SUSHI configuration or **ig-data**. Now the versions that live at **customized-ig/ig.ini** and **customized-ig/package-list.json** are the "true" versions, and should therefore be removed from **.gitignore** and checked into version control. The **customized-ig/input** folder may have also been in the **.gitignore** file, since SUSHI previously generated output into that folder. Now that **.fsh** files are located in **customized-ig/input/fsh**, this folder must be removed from **.gitignore** and checked into version control.

SUSHI will now output to **customized-ig/fsh-generated**, so the **fsh-generated** folder should be added to the **.gitinore** file.

#### 7 - Troubleshooting

Some users may experience one of these issues when running the IG Publisher on their migrated project:
* the IG publisher reports `No Source directories to scan found`
* the published IG does not include any of the resources from **fsh-generated**

This usually means that the IG Publisher is not using the correct template.  _First_, check to ensure your your **ig.ini** specifies the `#current` version of one of the supported templates (or a template that extends one of the supported templates).  See step 5 for the list of supported templates.

If you've confirmed you are using a `#current` version of a supported template, then the IG Publisher likely failed to download the updated template in your FHIR cache.  This may be due to corporate firewalls, network issues, or restrictive file permissions in your FHIR cache.  Usually, users can resolve this issue by deleting the base template from their FHIR cache:

&nbsp;&nbsp;&nbsp;&nbsp;{{< windows >}} `C:\Users\{user}\.fhir\packages\fhir.base.template#current`

&nbsp;&nbsp;&nbsp;&nbsp;{{< apple >}} `/Users/{user}/.fhir/packages/fhir.base.template#current`

substituting `{user}` with your username on your operating system.