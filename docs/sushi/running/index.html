<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.74.2" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

<link rel="alternate" type="application/rss&#43;xml" href="https://fshschool.org/docs/sushi/running/index.xml">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Running SUSHI | FSH School</title><meta property="og:title" content="Running SUSHI" />
<meta property="og:description" content="Instructions for running the SUSHI tool on a FSH project
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://fshschool.org/docs/sushi/running/" />

<meta itemprop="name" content="Running SUSHI">
<meta itemprop="description" content="Instructions for running the SUSHI tool on a FSH project
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Running SUSHI"/>
<meta name="twitter:description" content="Instructions for running the SUSHI tool on a FSH project
"/>





<link rel="preload" href="/scss/main.min.aa5d7a51632f7af0d6417c549b329fa5760a67d4a648167f545b8bb85f71174f.css" as="style">
<link href="/scss/main.min.aa5d7a51632f7af0d6417c549b329fa5760a67d4a648167f545b8bb85f71174f.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>



  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">FSH School</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/quickstart/" ><span>Quick Start</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/about/" ><span>About</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/community/" ><span>Community</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/downloads/" ><span>Downloads</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.cd7464a1a4fe48b79dbbf020e58868011f15fdbc030db97d78785e00d7feec904532f3b91fbbfdb2063aa25832d61bee17a17550388e1227e3ad1a24a47951a8.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.cd7464a1a4fe48b79dbbf020e58868011f15fdbc030db97d78785e00d7feec904532f3b91fbbfdb2063aa25832d61bee17a17550388e1227e3ad1a24a47951a8.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/sushi/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">SUSHI</a>
  </li>
  <ul>
    <li class="collapse show" id="docssushi">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/sushi/installation/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Installation</a>
  </li>
  <ul>
    <li class="collapse " id="docssushiinstallation">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/sushi/project/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Project Structure</a>
  </li>
  <ul>
    <li class="collapse " id="docssushiproject">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/sushi/configuration/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Configuration</a>
  </li>
  <ul>
    <li class="collapse " id="docssushiconfiguration">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/sushi/running/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Running SUSHI</a>
  </li>
  <ul>
    <li class="collapse show" id="docssushirunning">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/sushi/tips/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tips and Tricks</a>
  </li>
  <ul>
    <li class="collapse " id="docssushitips">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/sushi/tutorial/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SUSHI Tutorial</a>
  </li>
  <ul>
    <li class="collapse " id="docssushitutorial">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/sushi/api/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">API</a>
  </li>
  <ul>
    <li class="collapse " id="docssushiapi">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/gofsh/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">GoFSH</a>
  </li>
  <ul>
    <li class="collapse " id="docsgofsh">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/gofsh/installation/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Installation</a>
  </li>
  <ul>
    <li class="collapse " id="docsgofshinstallation">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/gofsh/api/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">API</a>
  </li>
  <ul>
    <li class="collapse " id="docsgofshapi">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/gofsh/running/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Running GoFSH</a>
  </li>
  <ul>
    <li class="collapse " id="docsgofshrunning">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/gofsh/tutorial/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">GoFSH Tutorial</a>
  </li>
  <ul>
    <li class="collapse " id="docsgofshtutorial">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/vscode/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Visual Studio Code Extension</a>
  </li>
  <ul>
    <li class="collapse " id="docsvscode">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">







<a href="https://github.com/FHIR/FSHSchool/issues/new?title=Running%20SUSHI" target="_blank"><i class="fab fa-github fa-fw"></i> Report a documentation issue</a>
<a href="https://github.com/FHIR/sushi/issues/new" target="_blank"><i class="fab fa-github fa-fw"></i> Report a SUSHI issue</a>

<a href="https://www.hl7.org/fhir/" target="_blank"><i class="fas fa-fire fa-fw"></i> FHIR R4 Specification</a>
<a href="http://build.fhir.org/ig/HL7/fhir-shorthand/" target="_blank"><i class="fas fa-fish fa-fw"></i> FHIR Shorthand</a>
<a href="https://chat.fhir.org/#narrow/stream/215610-shorthand" target="_blank"><i class="fas fa-comments fa-fw"></i> #shorthand</a>

</div>





<nav id="TableOfContents">
  <ul>
    <li><a href="#running-sushi">Running SUSHI</a>
      <ul>
        <li><a href="#sushi-commands">SUSHI Commands</a></li>
        <li><a href="#build-command-option-details">Build Command Option Details</a></li>
        <li><a href="#--out"><code>--out</code></a></li>
        <li><a href="#--preprocessed"><code>--preprocessed</code></a></li>
        <li><a href="#--snapshot"><code>--snapshot</code></a></li>
        <li><a href="#--config"><code>--config</code></a></li>
      </ul>
    </li>
    <li><a href="#status-messages">Status Messages</a></li>
    <li><a href="#error-messages">Error Messages</a>
      <ul>
        <li><a href="#structure-definition-is-missing-snapshot-error">Structure Definition is Missing Snapshot Error</a></li>
      </ul>
    </li>
    <li><a href="#sushi-outputs">SUSHI Outputs</a>
      <ul>
        <li><a href="#downloading-the-ig-publisher-scripts">Downloading the IG Publisher Scripts</a></li>
        <li><a href="#downloading-the-ig-publisher">Downloading the IG Publisher</a></li>
        <li><a href="#running-the-ig-publisher">Running the IG Publisher</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://fshschool.org/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://fshschool.org/docs/sushi/">SUSHI</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://fshschool.org/docs/sushi/running/">Running SUSHI</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Running SUSHI</h1>
        <div class="lead">Instructions for running the SUSHI tool on a FSH project</div>
	
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>
This documentation assumes you have a SUSHI-compliant project structure and configuration as discussed in the previous sections.
</div>

<h2 id="running-sushi">Running SUSHI</h2>
<p>SUSHI is executed from the command line. The general form of the SUSHI execution command is as follows:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><i class="fas fa-dollar-sign"></i> sushi <span style="color:#ce5c00;font-weight:bold">{</span>command<span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#ce5c00;font-weight:bold">{</span>options<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><p>Supported commands are <code>build</code>, <code>init</code>, <code>update-dependencies</code>, and <code>help</code>.</p>
<p>Use <code>sushi --version</code> to get basic information about the current SUSHI version. Use <code>sushi help</code> to get basic information about SUSHI, and use <code>sushi help {command}</code> to get information about a specific command and its options (e.g., <code>sushi help build</code>).</p>
<h3 id="sushi-commands">SUSHI Commands</h3>
<p>SUSHI provides various commands to use with FSH projects. The following sections provide more details on each.</p>
<h4 id="build"><code>build</code></h4>
<p>The <code>build</code> command is used to build a SUSHI project. In SUSHI 2.x, it is the default command and can be used as follows:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><i class="fas fa-dollar-sign"></i> sushi build <span style="color:#ce5c00;font-weight:bold">{</span>fsh-project-directory<span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#ce5c00;font-weight:bold">{</span>options<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><p>where options include the following (in any order):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">-l, --log-level &lt;level&gt;  specify the level of log messages (default: &#34;info&#34;) (choices: &#34;error&#34;, &#34;warn&#34;, &#34;info&#34;, &#34;debug&#34;)
-o, --out &lt;out&gt;          the path to the output folder (default: &#34;fsh-generated&#34;)
-p, --preprocessed       output FSH produced by preprocessing steps
-r, --require-latest     exit with error if this is not the latest version of SUSHI (default: false)
-s, --snapshot           generate snapshot in Structure Definition output (default: false)
-c, --config &lt;config&gt;    override elements in sushi-config.yaml (supported: &#39;version&#39;, &#39;status&#39;, &#39;releaselabel&#39;) (eg: --config status:draft)
-h, --help               display help for command
</code></pre></div><p>Further information about each option can be found in <a href="#build-command-option-details">Build Command Option Details</a>.</p>


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Tip</h4>
If you run SUSHI from your FSH project directory, and accept the defaults, the command can be shortened to <code>sushi build .</code> or simply <code>sushi build</code>.
</div>

<h4 id="init"><code>init</code></h4>
<p>The <code>init</code> command is used to generate a project structure that is compatible with the FHIR IG Publisher. In SUSHI 2.x, it can be used as follows:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><i class="fas fa-dollar-sign"></i> sushi init
</code></pre></div><p>Further details on how to use this command can be found in <a href="/docs/sushi/project/#initializing-a-sushi-project">Initializing a SUSHI Project</a>.</p>
<h4 id="update-dependencies"><code>update-dependencies</code></h4>
<p>The <code>update-dependencies</code> command is used to update the FSH project&rsquo;s dependencies to the latest version. The command will check all dependencies defined in the <code>sushi-config.yaml</code> file to see if they are at the latest published version. SUSHI will output a list of all dependencies that have later versions and prompt the author whether to update. Choosing to update will directly modify the <code>sushi-config.yaml</code> file with the latest version and download the latest version of the dependency to the FHIR cache. Any dependency with a <code>current</code> or <code>dev</code> version will not be modified. This command can be used as follows:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><i class="fas fa-dollar-sign"></i> sushi update-dependencies <span style="color:#ce5c00;font-weight:bold">{</span>fsh-project-directory<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><h3 id="build-command-option-details">Build Command Option Details</h3>
<p>The following sections give further detail on using certain command line options.</p>
<h3 id="--out"><code>--out</code></h3>
<p>The <code>--out</code> or <code>-o</code> flag specifies where SUSHI&rsquo;s output, the <strong>fsh-generated</strong> folder, should be written. By default, the folder will be written to the root folder, i.e., parallel to the <strong>input</strong> folder. When SUSHI begins, any existing content in the designated location is deleted. Within the <strong>fsh-generated</strong> folder, SUSHI generates file names based on the resource id (i.e., ${resourceType}-${resourceId}.json). If the id contains one or more path separators, SUSHI will sanitize file names to assure all files are written to the target directory. (<em>Note: the <code>--out</code> option does not refer to the output folder written by the IG Publisher</em>).</p>
<h3 id="--preprocessed"><code>--preprocessed</code></h3>
<p>The <code>--preprocessed</code> or <code>-p</code> flag can be used to to create a folder named <strong>_preprocessed</strong> in SUSHI&rsquo;s output folder. This folder will contain representations of the input FSH after several preprocessing steps have taken place. These steps include resolution of <a href="http://build.fhir.org/ig/HL7/fhir-shorthand/branches/master/reference.html#defining-aliases"><code>Alias</code> values</a>, insertion of <a href="http://build.fhir.org/ig/HL7/fhir-shorthand/branches/master/reference.html#defining-rule-sets"><code>RuleSet</code> rules</a>, and resolution of <a href="http://build.fhir.org/ig/HL7/fhir-shorthand/branches/master/reference.html#soft-indexing">soft indexing</a>. This is mainly provided as a debugging tool, for the author to verify that SUSHI is preprocessing the input FSH in an expected way, and to help trace errors in the output of SUSHI back to their source. For example, if the IG Publisher reports an error on element Bundle.entry[56].resource, it may be difficult to identify the problematic entry in your FSH source if you used soft-indexing. It is much easier, however, to identify the problematic element in the preprocessed FSH that contains explicit indices.</p>
<p>The example below shows a FSH snippet and a preprocessed version of that snippet. In this snippet, a <code>Profile</code> is defined using a <code>RuleSet</code> and an <code>Alias</code>, and below an <code>Instance</code> is defined which uses soft indexing.</p>
<pre><code>Alias: $CAT = http://hl7.org/fhir/ValueSet/observation-category

Profile: ObservationProfile
Parent: Observation
* insert Metadata
* category from $CAT (required)

RuleSet: Metadata
* ^version = &quot;1.2.3&quot;
* ^publisher = &quot;Example publisher&quot;

Instance: PatientInstance
InstanceOf: Patient
* name.given[+] = &quot;John&quot;
* name.given[+] = &quot;Q&quot;
</code></pre><p>The preprocessed version of the above FSH is shown below. The <code>$CAT</code> alias has been resolved to its full URL, the rules contained in the <code>RuleSet</code> have been inserted onto the <code>ObservationProfile</code>, and the <code>RuleSet</code> itself has been removed, and the rules on the <code>PatientInstance</code> have been resolved to fully specified paths, which do not use soft indexing.</p>
<pre><code>Alias: $CAT = http://hl7.org/fhir/ValueSet/observation-category

// Originally defined on lines 3 - 6
Profile: ObservationProfile
Parent: Observation
Id: ObservationProfile
* ^version = &quot;1.2.3&quot;
* ^publisher = &quot;Example publisher&quot;
* category from http://hl7.org/fhir/ValueSet/observation-category (required)

// Originally defined on lines 12 - 15
Instance: PatientInstance
InstanceOf: Patient
Usage: #example
* name.given[0] = &quot;John&quot;
* name.given[1] = &quot;Q&quot;
</code></pre>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>
Once you have finished reviewing your preprocessed FSH, we recommend deleting the <strong>_preprocessed</strong> folder to avoid potential confusion related to multiple versions of FSH files in your project. For this same reason, we do not recommend committing your preprocessed FSH to source control.
</div>

<h3 id="--snapshot"><code>--snapshot</code></h3>
<p>By default, SUSHI only generates the <a href="https://www.hl7.org/fhir/R4/profiling.html#snapshot">profile differential</a>, allowing the IG Publisher to create the <a href="https://www.hl7.org/fhir/R4/profiling.html#snapshot">profile snapshot</a>. This is the approach recommended by HL7 FHIR leadership. If authors prefer, the <code>--snapshot</code> (or <code>-s</code>) option can be used to cause SUSHI to generate the snapshot without having to run the IG Publisher.</p>
<h3 id="--config"><code>--config</code></h3>
<p>Typically, SUSHI uses the <code>sushi-config.yaml</code> file to define the configuration options it uses when processing FSH. However, in rare cases, it may be useful to override the values provided in <code>sushi-config.yaml</code> without changing the file itself. For these cases, the <code>--config</code> (or <code>-c</code>) option can be used to specify a configuration property and the override value for it. Currently, this option only allows <code>version</code>, <code>status</code>, and <code>releaselabel</code> to be overridden.</p>
<p>For example, specifying <code>sushi build . --config status:active</code> can be used to specify that the status should be &ldquo;active&rdquo; for that particular build of SUSHI.</p>
<h2 id="status-messages">Status Messages</h2>
<p>While SUSHI is running, it will print status messages as it processes your project files. When SUSHI has completed, you should receive a summary like the following:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">╔════════════════════════ SUSHI RESULTS ══════════════════════════╗
║ ╭───────────────┬──────────────┬──────────────┬───────────────╮ ║
║ │    Profiles   │  Extensions  │   Logicals   │   Resources   │ ║
║ ├───────────────┼──────────────┼──────────────┼───────────────┤ ║
║ │       1       │      1       │      1       │       1       │ ║
║ ╰───────────────┴──────────────┴──────────────┴───────────────╯ ║
║ ╭────────────────────┬───────────────────┬────────────────────╮ ║
║ │      ValueSets     │    CodeSystems    │     Instances      │ ║
║ ├────────────────────┼───────────────────┼────────────────────┤ ║
║ │         1          │         1         │         1          │ ║
║ ╰────────────────────┴───────────────────┴────────────────────╯ ║
║                                                                 ║
╠═════════════════════════════════════════════════════════════════╣
║ Fin-tastic job!                        0 Errors      0 Warnings ║
╚═════════════════════════════════════════════════════════════════╝
</code></pre></div>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>
The following message is expected, and should be ignored:(node:46420) Warning: Accessing non-existent property &lsquo;INVALID_ALT_NUMBER&rsquo; of module exports inside circular dependency (Use <code>node --trace-warnings ...</code> to show where the warning was created)
</div>

<h2 id="error-messages">Error Messages</h2>
<p>In the process of developing your IG using FSH, you may encounter SUSHI error messages (written to the command console). Most error messages point to a specific line or lines in a <code>.fsh</code> file. If possible, SUSHI will continue, despite errors, to produce FHIR artifacts, but those artifacts may omit problematic rules. SUSHI should always exit gracefully. If SUSHI crashes, please report the issue using the <a href="https://github.com/FHIR/sushi/issues">SUSHI issue tracker</a>.</p>
<p>Here are some general tips for debugging:</p>
<ul>
<li><strong>Parsing (syntax) errors should be fixed first.</strong> A single syntax error can balloon into many other errors, so you should always eliminate syntax errors first. Syntax error messages may include <code>extraneous input {x} expecting {y}</code>, <code>mismatched input {x} expecting {y}</code> and <code>no viable alternative at {x}</code>. These messages indicate that the line in question is not a valid FSH statement.</li>
<li><strong>The order of keywords matters.</strong> The declarations must start with the type of item you are creating (e.g., Profile, Instance, ValueSet).</li>
<li><strong>The order of rules usually doesn&rsquo;t matter, but there are exceptions.</strong> Slices and extensions must be created before they are constrained.</li>
<li><strong>Rules must contain valid paths.</strong> The <code>No element found at path</code> error means that although the overall grammar of the rule may be correct, SUSHI could not find the FHIR element you are referring to in the rule. Make sure there are no spelling errors, the element names in the path are correct, and you are using the <a href="https://build.fhir.org/ig/HL7/fhir-shorthand/reference.html#fsh-paths">path grammar</a> correctly.</li>
<li><strong>The community can help.</strong> If you are getting an error you can&rsquo;t resolve, you can ask for help on the <a href="https://chat.fhir.org/#narrow/stream/215610-shorthand">#shorthand chat channel</a>.</li>
</ul>
<h3 id="structure-definition-is-missing-snapshot-error">Structure Definition is Missing Snapshot Error</h3>
<p>Some non-HL7 FHIR packages are distributed without snapshot elements in their profiles. If your IG uses one of these profiles, SUSHI will report an error like the following:</p>
<blockquote>
<p>Structure Definition <a href="http://fhir.de/StructureDefinition/observation-de-vitalsign">http://fhir.de/StructureDefinition/observation-de-vitalsign</a> is missing snapshot. Snapshot is required for import.</p>
</blockquote>
<p>Since SUSHI does not implement its own snapshot generator, you must update the package in your FHIR cache so that its profiles include snapshot elements. Fortunately, the <a href="https://fire.ly/products/firely-terminal/">Firely Terminal</a> provides a way to do this.</p>
<p>First, you must <a href="https://docs.fire.ly/projects/Firely-Terminal/getting_started/InstallingFirelyTerminal.html">install Firely Terminal</a>. Then use Firely Terminal to populate the snapshot elements in the dependency package.</p>
<ol>
<li>Run the command: <code>fhir inflate --package  &lt;packagename&gt;</code>, substituting the dependency package ID for <code>&lt;packagename&gt;</code>.
<ul>
<li>E.g., <code>fhir inflate --package de.basisprofil.r4</code></li>
</ul>
</li>
<li>Run SUSHI again. The error about missing snapshots should no longer be displayed.</li>
</ol>


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Tip</h4>
You can see a list of the available Firely Terminal versions <a href="https://www.nuget.org/packages/Firely.Terminal#versions-body-tab">here</a>. Version 3.1.0 or higher is required to use the <code>inflate</code> command. Versions prior to 3.1.0 offer similar functionality via a <code>bake</code> command, but they are no longer recommended.
</div>



<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Firely Terminal Note</h4>
<p>Inflating a single package, as described above with <code>fhir inflate --package  &lt;packagename&gt;</code>, is a free option in Firely Terminal. Alternately, authors can use <code>fhir install &lt;packagename&gt;</code> to download, install, and automatically &ldquo;inflate&rdquo; the package. Using <code>fhir inflate</code> as a bulk option to inflate the current project and all its dependencies, however, requires a Simplifier license.</p>
<p>The <a href="https://docs.fire.ly/projects/Firely-Terminal/Managing-Packages.html" target="_blank">Package Management section</a>  of the Firely Terminal documentation provides additional details.</p>

</div>

<h2 id="sushi-outputs">SUSHI Outputs</h2>
<p>Based on the inputs in FSH files, <strong>sushi-config.yaml</strong>, and the IG project directory, SUSHI populates the <strong>fsh-generated</strong> directory. For example, running SUSHI on the my-project project from the <a href="/docs/sushi/project/">Project Structure</a> section would add a <strong>fsh-generated</strong> folder as shown below:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">my-project
├── fsh-generated
|   └── resources
|       ├── CodeSystem-myCodeSystem.json
|       ├── Patient-myPatient-example.json
|       ├── StructureDefinition-myExtension.json
|       ├── StructureDefinition-myProfile.json
|       ├── ValueSet-myValueSet.json
|       └── ImplementationGuide-myIG.json
├── ig.ini
├── input
|   ├── fsh
│   |   └── (fsh files)
│   ├── ignoreWarnings.txt
│   ├── images
│   │   ├── myDocument.pdf
│   │   ├── myGraphic.png
│   │   └── mySpreadsheet.xlsx
│   ├── includes
│   │   └── menu.xml
│   ├── pagecontent
│   │   ├── index.md
│   │   ├── 2_mySecondPage.md
│   │   ├── 3_myThirdPage.md
│   │   └── 4_myFourthPage.md
├── package-list.json
└── sushi-config.json
</code></pre></div><p>SUSHI creates only the <strong>fsh-generated</strong> folder, but some of the files shown above are either processed by SUSHI to create the <strong>ImplementationGuide.json</strong> file, or <em>can</em> be generated by SUSHI if the author wishes. See the breakdown of files and directories below:</p>
<ul>
<li><strong>fsh-generated*</strong>: Generated from the definitions in the <strong>input/fsh/*.fsh</strong> files.</li>
<li><strong>ig.ini</strong>: Specified by the author and unchanged by SUSHI.</li>
<li><strong>input/ignoreWarnings.txt</strong>: Specified by the author and unchanged by SUSHI.</li>
<li><strong>input/images/*</strong>: Specified by the author and unchanged by SUSHI.</li>
<li><strong>input/includes/menu.xml</strong>: Specified by the author and unchanged by SUSHI, but can alternately be specified via the <code>menu</code> property in <strong>sushi-config.yaml</strong>. If the <code>menu</code> configuration property is used, the output is generated to <strong>fsh-generated/includes/menu.xml</strong>.</li>
<li><strong>input/pagecontent/*</strong>: Specified by the author, numeric prefixes are used by SUSHI in generating the <strong>ImplementationGuide-myIG.json</strong> file.</li>
<li><strong>package-list.json</strong>: Specified by the author and unchanged by SUSHI.</li>
</ul>
<h3 id="downloading-the-ig-publisher-scripts">Downloading the IG Publisher Scripts</h3>
<p>To run the IG Publisher, we recommend downloading the <strong>_updatePublisher.bat|sh</strong> and <strong>_genonce.bat|sh</strong> scripts provided by the sample-ig project. To get these scripts, <a href="https://github.com/FHIR/sample-ig/archive/master.zip">download the sample-ig project</a>, unzip it, and copy <em>all</em> of the <strong>.bat</strong> and <strong>.sh</strong> files to the directory above the <strong>fsh-generated</strong> directory (<strong>my-project</strong> in the example above).</p>
<p>If you used <code>sushi init</code> then these scripts were already downloaded and added to your project.</p>
<h3 id="downloading-the-ig-publisher">Downloading the IG Publisher</h3>
<p>After copying these, change directories in the command prompt to the directory above the <strong>fsh-generated</strong> directory. At the command prompt, enter:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><i class='fab fa-windows fa-fw'></i> <i class="fas fa-dollar-sign"></i> _updatePublisher
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><i class='fab fa-apple fa-fw'></i> <i class="fas fa-dollar-sign"></i> ./_updatePublisher.sh
</code></pre></div><p>This will download the latest version of the HL7 FHIR IG Publisher tool into the <strong>/input-cache</strong> directory. <em>This step can be skipped if you already have the latest version of the IG Publisher tool in <strong>input-cache</strong>.</em></p>


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Tip</h4>
If you are blocked by a firewall, or if for any reason <code>_updatePublisher</code> fails to execute, download the current IG Publisher jar file <a href="https://github.com/HL7/fhir-ig-publisher/releases/latest/download/publisher.jar">here</a>. When the file has downloaded, move it into the <strong>input-cache</strong> directory (which you may need to create as a <em>sibling</em> to the <strong>input</strong> directory).
</div>

<h3 id="running-the-ig-publisher">Running the IG Publisher</h3>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>
If you have never run the IG Publisher, you may need to install Jekyll first. See <a href="https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation">Installing the IG Publisher</a> for details.
</div>

<p>After the IG Publisher has been successfully downloaded, execute the following command to run it:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><i class='fab fa-windows fa-fw'></i> <i class="fas fa-dollar-sign"></i> _genonce
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><i class='fab fa-apple fa-fw'></i> <i class="fas fa-dollar-sign"></i> ./_genonce.sh
</code></pre></div><p>This will run the HL7 IG Publisher, which may take several minutes to complete. After the publisher is finished, open the file <strong>/output/index.html</strong> in a browser to see the resulting IG.</p>


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Tip</h4>
<p>When running SUSHI, the IG Publisher will look for an optional <strong>fsh.ini</strong> control file in the root directory of the project (the same directory that contains <strong>ig.ini</strong>). This file should have <code>[FSH]</code> on the first line, and can include a <code>sushi-version</code> property, used to specify which version of SUSHI the IG Publisher should use, and a <code>timeout</code> property, used to set a timeout for SUSHI (in seconds). The default timeout is 60 seconds. An example <strong>fsh.ini</strong> file is provided below.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">[FSH]
sushi-version = 0.16.0
timeout = 120
</code></pre></div>
</div>


        <div class="section-index">
    
    
    
    
    <hr class="panel-line">
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
</div>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified May 2, 2024: <a  href="https://github.com/FHIR/FSHSchool/commit/9513c199578d987428bf3007d79ec371c0951287">Remove specific tags for SUSHI 3.0.0 &#43; Document new CLI command options (#90) (9513c19)</a>
</div>
</div>

          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Zulip" aria-label="Zulip">
    <a class="text-white" target="_blank" href="https://chat.fhir.org/#narrow/stream/215610-shorthand">
      <i class="fas fa-comments"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Issues" aria-label="Issues">
    <a class="text-white" target="_blank" href="https://github.com/FHIR/sushi/issues">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Jira" aria-label="Jira">
    <a class="text-white" target="_blank" href="https://jira.hl7.org/issues/?jql=project%20%3D%20FHIR%20AND%20Specification%20%3D%20%22Shorthand%20%28FHIR%29%20%5BFHIR-shorthand%5D%22">
      <i class="fab fa-jira"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="FSH School" aria-label="FSH School">
    <a class="text-white" target="_blank" href="https://github.com/FHIR/FSHSchool">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="SUSHI" aria-label="SUSHI">
    <a class="text-white" target="_blank" href="https://github.com/FHIR/sushi/">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2024 Health Level Seven International All Rights Reserved. FHIR® is a registered trademark of Health Level Seven International.</small>
        
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>









<script src="/js/main.min.664f21bf5eb0c31ebc661e2616e6c63e0448cec6d5636d869957be423c3cb952.js" integrity="sha256-Zk8hv16wwx68Zh4mFubGPgRIzsbVY22GmVe&#43;Qjw8uVI=" crossorigin="anonymous"></script>



  </body>
</html>